
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–∞–∑–ª: –ì–µ–æ—Ä–≥–∏–π –∏ –ú–∞–∫—Å–∏–º –°–µ—Ä–≥–µ–µ–≤–∏—á</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom right, #ffc0cb, #dda0dd);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #puzzle {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 2px;
            margin-top: 50px;
        }
        .tile {
            width: 100px;
            height: 100px;
            background-size: 300px 300px;
            cursor: pointer;
            border: 1px solid #fff;
        }
        #dialogue {
            margin-top: 30px;
            background: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            max-width: 350px;
            text-align: left;
            font-size: 16px;
            line-height: 1.5em;
        }
        #congrats {
            display: none;
            margin-top: 40px;
            font-size: 28px;
            font-weight: bold;
            color: #800080;
            text-align: center;
        }
        #final-image {
            display: none;
            margin-top: 20px;
            width: 300px;
            height: 300px;
        }
        audio {
            display: none;
        }
    </style>
</head>
<body>
    <h1>–°–æ–±–µ—Ä–∏ –ø–∞–∑–ª –ª—é–±–≤–∏</h1>
    <audio autoplay loop>
        <source src="romantic_music.mp3" type="audio/mpeg">
    </audio>
    <div id="puzzle"></div>
    <div id="dialogue"><strong>–ì–µ–æ—Ä–≥–∏–π:</strong> –¢—ã –≤—Å–µ–≥–¥–∞ —Ç–∞–∫ —É–ª—ã–±–∞–µ—à—å—Å—è, –∫–æ–≥–¥–∞ —Ä—è–¥–æ–º —Å–æ –º–Ω–æ–π?</div>
    <div id="congrats">üéâ –ü–û–ó–î–†–ê–í–õ–Ø–Æ! –¢–´ –ì–ï–ô! üåà</div>
    <img id="final-image" src="IMG_5268.png" alt="Final Image">

    <script>
        const puzzle = document.getElementById('puzzle');
        const dialogueBox = document.getElementById('dialogue');
        const finalImage = document.getElementById('final-image');
        const congrats = document.getElementById('congrats');

        const dialogues = [
            "<strong>–ú–∞–∫—Å–∏–º –°–µ—Ä–≥–µ–µ–≤–∏—á:</strong> –ú–æ–∂–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã —Ä—è–¥–æ–º ‚Äî —ç—Ç–æ –º–æ–π –ª—é–±–∏–º—ã–π –º–æ–º–µ–Ω—Ç –¥–Ω—è.",
            "<strong>–ì–µ–æ—Ä–≥–∏–π:</strong> –ù–∞–¥–µ—é—Å—å, —Ç—ã –Ω–µ –ø—Ä–æ—Ç–∏–≤, —á—Ç–æ —è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞ —Ç–µ–±—è —Å–º–æ—Ç—Ä—é.",
            "<strong>–ú–∞–∫—Å–∏–º –°–µ—Ä–≥–µ–µ–≤–∏—á:</strong> –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—É–¥–µ—à—å —É–ª—ã–±–∞—Ç—å—Å—è –≤ –æ—Ç–≤–µ—Ç.",
            "<strong>–ì–µ–æ—Ä–≥–∏–π:</strong> –í —à—É–º–µ —Å—Ç—Ä–æ–π–∫–∏ —Ç—ã ‚Äî –º–æ–π —Å–∞–º—ã–π —Ç—ë–ø–ª—ã–π –∑–≤—É–∫.",
            "<strong>–ú–∞–∫—Å–∏–º –°–µ—Ä–≥–µ–µ–≤–∏—á:</strong> –ê —Ç—ã –≤ —Ö–∏–º–∏–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–Ω–∏–º–∞–µ—à—å, –∫—Ä–æ–º–µ —Ñ–æ—Ä–º—É–ª—ã –ª—é–±–≤–∏?",
            "<strong>–ì–µ–æ—Ä–≥–∏–π:</strong> –Ø –∏–Ω–∂–µ–Ω–µ—Ä, –Ω–æ —Ç—ã ‚Äî –º–æ—è –ª—É—á—à–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.",
            "<strong>–ú–∞–∫—Å–∏–º –°–µ—Ä–≥–µ–µ–≤–∏—á:</strong> –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, –∫–∞–∫ —Ç—ã —Å–æ–±—Ä–∞–ª –∏ –º–µ–Ω—è, –∏ —ç—Ç–æ—Ç –ø–∞–∑–ª.",
            "<strong>–ì–µ–æ—Ä–≥–∏–π:</strong> –ó–Ω–∞–µ—à—å, —è –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–Ω–∂–µ–Ω–µ—Ä, —è —Ä–æ–º–∞–Ω—Ç–∏–∫.",
            "<strong>–ú–∞–∫—Å–∏–º –°–µ—Ä–≥–µ–µ–≤–∏—á:</strong> –ê —è —Ö–∏–º–∏–∫, –Ω–æ –ø–æ—Ö–æ–∂–µ, —Ç—ã ‚Äî –º–æ—è —Ñ–æ—Ä–º—É–ª–∞ —Å—á–∞—Å—Ç—å—è."
        ];

        let moveCount = 0;

        const pieces = Array.from({length: 9}, (_, i) => i);
        pieces.sort(() => Math.random() - 0.5);

        function createTile(index, position) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.style.backgroundImage = "url('IMG_5268.png')";
            tile.style.backgroundPosition = `-${(index % 3) * 100}px -${Math.floor(index / 3) * 100}px`;
            tile.dataset.index = index;
            tile.dataset.position = position;
            tile.addEventListener('click', () => handleTileClick(tile));
            return tile;
        }

        function drawPuzzle() {
            puzzle.innerHTML = '';
            pieces.forEach((pos, i) => {
                const tile = createTile(pos, i);
                puzzle.appendChild(tile);
            });
        }

        let selectedTile = null;

        function handleTileClick(tile) {
            if (!selectedTile) {
                selectedTile = tile;
                tile.style.border = '2px solid red';
            } else {
                const idx1 = parseInt(selectedTile.dataset.position);
                const idx2 = parseInt(tile.dataset.position);

                [pieces[idx1], pieces[idx2]] = [pieces[idx2], pieces[idx1]];
                selectedTile.style.border = '1px solid #fff';
                selectedTile = null;
                drawPuzzle();

                if (moveCount < dialogues.length) {
                    const newLine = document.createElement('div');
                    newLine.innerHTML = dialogues[moveCount];
                    dialogueBox.appendChild(newLine);
                    moveCount++;
                }

                checkCompletion();
            }
        }

        function checkCompletion() {
            for (let i = 0; i < pieces.length; i++) {
                if (pieces[i] !== i) return;
            }
            puzzle.style.display = 'none';
            finalImage.style.display = 'block';
            congrats.style.display = 'block';
        }

        drawPuzzle();
    </script>
</body>
</html>
